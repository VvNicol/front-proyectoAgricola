<div class="row contenedor">

    <!-- (Imágenes) -->
    <div class="col-12 imagen-fondo2 col-md-5 p-0 d-md-block">
        <div class="carrusel-contenedor">
            <div class="carrusel-imagen">
                <img [src]="imagenes[indiceImagenActual]" alt="Imagen del carrusel" />
            </div>
        </div>
    </div>

    <!-- (Registrarse) -->
    <div class="col-12 col-md-8 col-lg-7 mt-5 d-flex justify-content-center align-items-center">
        <div class="col-12 col-md-9 col-lg-7 p-5 formulario bg-light rounded shadow-lg">
            <h2 class="text-center mb-4 text-primary">Registrarse</h2>

            <!-- Barra de progreso -->
            <mat-progress-bar *ngIf="cargando" mode="indeterminate"></mat-progress-bar>

            <form [formGroup]="formularioRegistro" (ngSubmit)="registrar()">

                <!-- Nombre Completo -->
                <div class="mb-4">
                    <label for="nombreCompleto" class="form-label">Nombre Completo</label>
                    <input type="text" id="nombreCompleto" formControlName="nombreCompleto" class="form-control"
                        [ngClass]="{ 'is-invalid': formularioRegistro.get('nombreCompleto')?.touched && formularioRegistro.get('nombreCompleto')?.invalid }" />
                    <div *ngIf="formularioRegistro.get('nombreCompleto')?.touched && formularioRegistro.get('nombreCompleto')?.invalid"
                        class="invalid-feedback">
                        El nombre completo es obligatorio.
                    </div>
                </div>

                <!-- Correo Electrónico -->
                <div class="mb-4">
                    <label for="correo" class="form-label">Correo Electrónico</label>
                    <input type="email" id="correo" formControlName="correo" class="form-control"
                        [ngClass]="{ 'is-invalid': formularioRegistro.get('correo')?.touched && formularioRegistro.get('correo')?.invalid }" />
                    <div *ngIf="formularioRegistro.get('correo')?.touched && formularioRegistro.get('correo')?.hasError('required')"
                        class="invalid-feedback">
                        El correo electrónico es obligatorio.
                    </div>
                    <div *ngIf="formularioRegistro.get('correo')?.touched && formularioRegistro.get('correo')?.hasError('email')"
                        class="invalid-feedback">
                        El correo no tiene un formato válido.
                    </div>
                </div>

                <!-- Teléfono -->
                <div class="mb-4">
                    <label for="telefono" class="form-label">Teléfono</label>
                    <input type="tel" id="telefono" formControlName="telefono" class="form-control"
                        [ngClass]="{ 'is-invalid': formularioRegistro.get('telefono')?.touched && formularioRegistro.get('telefono')?.invalid }" />
                    <div *ngIf="formularioRegistro.get('telefono')?.touched && formularioRegistro.get('telefono')?.hasError('required')"
                        class="invalid-feedback">
                        El teléfono es obligatorio.
                    </div>
                    <div *ngIf="formularioRegistro.get('telefono')?.touched && formularioRegistro.get('telefono')?.hasError('pattern')"
                        class="invalid-feedback">
                        El teléfono debe contener solo números.
                    </div>
                </div>

                <!-- Contraseña -->
                <div class="mb-4">
                    <label for="contrasenia" class="form-label">Contraseña</label>
                    <input type="password" id="contrasenia" formControlName="contrasenia" class="form-control"
                        [ngClass]="{ 'is-invalid': formularioRegistro.get('contrasenia')?.touched && formularioRegistro.get('contrasenia')?.invalid }" />
                    <div *ngIf="formularioRegistro.get('contrasenia')?.touched && formularioRegistro.get('contrasenia')?.hasError('required')"
                        class="invalid-feedback">
                        La contraseña es obligatoria.
                    </div>
                    <div *ngIf="formularioRegistro.get('contrasenia')?.touched && formularioRegistro.get('contrasenia')?.hasError('minlength')"
                        class="invalid-feedback">
                        La contraseña debe tener al menos 6 caracteres.
                    </div>
                </div>

                <!-- Confirmar Contraseña -->
                <div class="mb-4">
                    <label for="confirmarContrasenia" class="form-label">Confirmar Contraseña</label>
                    <input type="password" id="confirmarContrasenia" formControlName="confirmarContrasenia"
                        class="form-control"
                        [ngClass]="{ 'is-invalid': formularioRegistro.hasError('notMatching') && formularioRegistro.get('confirmarContrasenia')?.touched }" />
                    <div *ngIf="formularioRegistro.hasError('notMatching') && formularioRegistro.get('confirmarContrasenia')?.touched"
                        class="invalid-feedback">
                        Las contraseñas no coinciden.
                    </div>
                </div>

                <!-- Botón de registro -->
                <button type="submit" class="btn btn-primary w-100 mt-4" [disabled]="formularioRegistro.invalid">
                    Registrarse
                </button>

                <!-- Mensaje de éxito -->
                <div *ngIf="mensaje" class="alert alert-success mt-3 text-center">
                    {{ mensaje }}
                </div>

                <!-- Mensaje de error -->
                <div *ngIf="error" class="alert alert-danger mt-3 text-center">
                    {{ error }}
                </div>

            </form>
        </div>
    </div>
</div>